{"version":3,"sources":["config/constants.js","components/canvas-editor/editor.jsx","../node_modules/browser-image-compression/dist/browser-image-compression.mjs","utils/file/index.js","routes/canvas/index.js"],"names":["SETTINGS","BRIGHTNESS","SATURATION","CONTRAST","useStyles","makeStyles","namespace","fn","log","args","console","themeLogger","theme","canvas","height","width","margin","background","boxShadow","Editor","image","brightness","classes","ref","useRef","useEffect","url","current","ctx","getContext","Promise","r","i","Image","onload","src","then","img","filter","drawImage","canvasProps","Object","assign","id","className","_slicedToArray","e","n","Array","isArray","t","a","o","s","Symbol","iterator","next","done","push","value","length","return","TypeError","window","cordova","require","CustomFile","getOriginalSymbol","File","CustomFileReader","FileReader","getDataUrlFromFile","result","onerror","readAsDataURL","getFilefromDataUrl","arguments","Date","now","split","match","atob","c","Uint8Array","charCodeAt","u","Blob","type","name","lastModified","drawImageInCanvas","getNewCanvasAndCtx","drawFileInCanvas","createImageBitmap","canvasToFile","OffscreenCanvas","convertToBlob","quality","$If_4","call","this","bind","toDataURL","getExifOrientation","DataView","target","getUint16","byteLength","getUint32","readAsArrayBuffer","handleMaxWidthOrHeight","maxWidthOrHeight","Number","isInteger","followExifOrientation","transform","document","createElement","compress","maxIteration","maxSizeMB","l","m","exifOrientation","$If_2","$Loop_3","size","f","pop","Worker","URL","createObjectURL","concat","self","addEventListener","data","file","imageCompressionLibUrl","options","postMessage","error","message","stack","importScripts","imageCompression","compressOnWebWorker","loadImage","handler","removeEventListener","Error","POSITIVE_INFINITY","useWebWorker","test","WorkerGlobalScope","$If_3","warn","toBase64","resolve","reject","reader","convertAndCompress","compressedImage","getFileFromEvent","event","dataTransfer","items","item","kind","getAsFile","files","saveImage","storage","set","container","Canvas","props","context","useState","setBrightness","setImage","useContext","ImageContext","get","_getBrightness","onDrop","preventDefault","_processFile","onDragOver","ev","Consumer"],"mappings":"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","file":"static/js/canvas.dc3dea94.chunk.js","sourcesContent":["export const SETTINGS = {\r\n  BRIGHTNESS: \"brightness\",\r\n  SATURATION: \"saturation\",\r\n  CONTRAST: \"contrast\"\r\n};\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nconst themeLogger = (namespace, fn, log = true) => (...args) => {\r\n  if (log) console.log(namespace, ...args);\r\n  return fn(...args);\r\n};\r\n\r\nconst useStyles = makeStyles(\r\n  themeLogger(\r\n    \"canvas-editor\",\r\n    (theme) => ({\r\n      canvas: {\r\n        height: \"calc(100% - 60px)\",\r\n        width: \"calc(100% - 60px)\",\r\n        margin: \"30px 0\",\r\n        background: \"#fafafa\",\r\n        boxShadow:\r\n          \"0px 1px 3px 0px rgba(0,0,0,0.2), 0px 1px 1px 0px rgba(0,0,0,0.14), 0px 2px 1px -1px rgba(0,0,0,0.12)\"\r\n      }\r\n    }),\r\n    false\r\n  )\r\n);\r\n\r\nfunction loadImage(url) {\r\n  return new Promise((r) => {\r\n    let i = new Image();\r\n    i.onload = () => r(i);\r\n    i.src = url;\r\n  });\r\n}\r\n/**\r\n * @todo following\r\n *\r\n * 1. add file upload\r\n * 2. add controls for filters(brightness, blur... etc)\r\n * 3. add error handling for file upload\r\n * 4. use filter props from filter tab\r\n *\r\n */\r\nfunction Editor({ canvas = {}, image, brightness = 100 }) {\r\n  const classes = useStyles();\r\n  const ref = useRef(null);\r\n\r\n  /**\r\n   * @type react-hook\r\n   * @description test hook to load a test image and apply a simple filter to test it functionality.\r\n   */\r\n  useEffect(() => {\r\n    const canvas = ref.current;\r\n    const ctx = canvas.getContext(\"2d\");\r\n    loadImage(image).then((img) => {\r\n      ctx.filter = `sepia(.15) contrast(1.25) brightness(${brightness}%) hue-rotate(5deg)`;\r\n      ctx.drawImage(\r\n        img,\r\n        0,\r\n        0,\r\n        img.width,\r\n        img.height,\r\n        0,\r\n        0,\r\n        canvas.width,\r\n        canvas.height\r\n      );\r\n    });\r\n  }, [image, ref, brightness]);\r\n\r\n  const canvasProps = Object.assign(\r\n    {},\r\n    {\r\n      id: \"editor\",\r\n      // height: \"200px\",\r\n      // width: \"200px\",\r\n      className: classes.canvas,\r\n      ref\r\n    },\r\n    canvas\r\n  );\r\n\r\n  return <canvas {...canvasProps} />;\r\n}\r\n\r\nexport default Editor;\r\n","/**\n * Browser Image Compression\n * v1.0.6\n * by Donald <donaldcwl@gmail.com>\n * https://github.com/Donaldcwl/browser-image-compression\n */\nfunction _slicedToArray(e, n) {\n  return function _arrayWithHoles(e) {\n    if (Array.isArray(e)) return e;\n  }(e) || function _iterableToArrayLimit(e, n) {\n    var r = [],\n        t = !0,\n        a = !1,\n        i = void 0;\n\n    try {\n      for (var o, s = e[Symbol.iterator](); !(t = (o = s.next()).done) && (r.push(o.value), !n || r.length !== n); t = !0) {\n        ;\n      }\n    } catch (e) {\n      a = !0, i = e;\n    } finally {\n      try {\n        t || null == s.return || s.return();\n      } finally {\n        if (a) throw i;\n      }\n    }\n\n    return r;\n  }(e, n) || function _nonIterableRest() {\n    throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n  }();\n}\n\nvar e = \"undefined\" != typeof window && window.cordova && window.cordova.require(\"cordova/modulemapper\"),\n    CustomFile = e && e.getOriginalSymbol(window, \"File\") || File,\n    CustomFileReader = e && e.getOriginalSymbol(window, \"FileReader\") || FileReader;\n\nfunction getDataUrlFromFile(e) {\n  return new Promise(function (n, r) {\n    var t = new CustomFileReader();\n    t.onload = function () {\n      return n(t.result);\n    }, t.onerror = function (e) {\n      return r(e);\n    }, t.readAsDataURL(e);\n  });\n}\n\nfunction getFilefromDataUrl(e, n) {\n  var r = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : Date.now();\n  return new Promise(function (t) {\n    for (var a = e.split(\",\"), i = a[0].match(/:(.*?);/)[1], o = atob(a[1]), s = o.length, c = new Uint8Array(s); s--;) {\n      c[s] = o.charCodeAt(s);\n    }\n\n    var u = new Blob([c], {\n      type: i\n    });\n    u.name = n, u.lastModified = r, t(u);\n  });\n}\n\nfunction loadImage(e) {\n  return new Promise(function (n, r) {\n    var t = new Image();\n    t.onload = function () {\n      return n(t);\n    }, t.onerror = function (e) {\n      return r(e);\n    }, t.src = e;\n  });\n}\n\nfunction drawImageInCanvas(e) {\n  var n = _slicedToArray(getNewCanvasAndCtx(e.width, e.height), 2),\n      r = n[0];\n\n  return n[1].drawImage(e, 0, 0, r.width, r.height), r;\n}\n\nfunction drawFileInCanvas(e) {\n  return new Promise(function (n, r) {\n    var t,\n        a,\n        i = function $Try_1_Post() {\n      try {\n        return a = drawImageInCanvas(t), n([t, a]);\n      } catch (e) {\n        return r(e);\n      }\n    },\n        o = function $Try_1_Catch(n) {\n      try {\n        return getDataUrlFromFile(e).then(function (e) {\n          try {\n            return loadImage(e).then(function (e) {\n              try {\n                return t = e, i();\n              } catch (e) {\n                return r(e);\n              }\n            }, r);\n          } catch (e) {\n            return r(e);\n          }\n        }, r);\n      } catch (e) {\n        return r(e);\n      }\n    };\n\n    try {\n      return createImageBitmap(e).then(function (e) {\n        try {\n          return t = e, i();\n        } catch (e) {\n          return o();\n        }\n      }, o);\n    } catch (e) {\n      o();\n    }\n  });\n}\n\nfunction canvasToFile(e, n, r, t) {\n  var a = arguments.length > 4 && void 0 !== arguments[4] ? arguments[4] : 1;\n  return new Promise(function (i, o) {\n    var s;\n    return \"function\" == typeof OffscreenCanvas && e instanceof OffscreenCanvas ? e.convertToBlob({\n      type: n,\n      quality: a\n    }).then(function (e) {\n      try {\n        return (s = e).name = r, s.lastModified = t, $If_4.call(this);\n      } catch (e) {\n        return o(e);\n      }\n    }.bind(this), o) : getFilefromDataUrl(e.toDataURL(n, a), r, t).then(function (e) {\n      try {\n        return s = e, $If_4.call(this);\n      } catch (e) {\n        return o(e);\n      }\n    }.bind(this), o);\n\n    function $If_4() {\n      return i(s);\n    }\n  });\n}\n\nfunction getExifOrientation(e) {\n  return new Promise(function (n, r) {\n    var t = new CustomFileReader();\n    t.onload = function (e) {\n      var r = new DataView(e.target.result);\n      if (65496 != r.getUint16(0, !1)) return n(-2);\n\n      for (var t = r.byteLength, a = 2; a < t;) {\n        if (r.getUint16(a + 2, !1) <= 8) return n(-1);\n        var i = r.getUint16(a, !1);\n\n        if (a += 2, 65505 == i) {\n          if (1165519206 != r.getUint32(a += 2, !1)) return n(-1);\n          var o = 18761 == r.getUint16(a += 6, !1);\n          a += r.getUint32(a + 4, o);\n          var s = r.getUint16(a, o);\n          a += 2;\n\n          for (var c = 0; c < s; c++) {\n            if (274 == r.getUint16(a + 12 * c, o)) return n(r.getUint16(a + 12 * c + 8, o));\n          }\n        } else {\n          if (65280 != (65280 & i)) break;\n          a += r.getUint16(a, !1);\n        }\n      }\n\n      return n(-1);\n    }, t.onerror = function (e) {\n      return r(e);\n    }, t.readAsArrayBuffer(e);\n  });\n}\n\nfunction handleMaxWidthOrHeight(e, n) {\n  var r,\n      t = e.width,\n      a = e.height,\n      i = n.maxWidthOrHeight,\n      o = e;\n\n  if (Number.isInteger(i) && (t > i || a > i)) {\n    var s = _slicedToArray(getNewCanvasAndCtx(t, a), 2);\n\n    o = s[0], r = s[1], t > a ? (o.width = i, o.height = a / t * i) : (o.width = t / a * i, o.height = i), r.drawImage(e, 0, 0, o.width, o.height);\n  }\n\n  return o;\n}\n\nfunction followExifOrientation(e, n) {\n  var r = e.width,\n      t = e.height,\n      a = _slicedToArray(getNewCanvasAndCtx(r, t), 2),\n      i = a[0],\n      o = a[1];\n\n  switch (4 < n && n < 9 ? (i.width = t, i.height = r) : (i.width = r, i.height = t), n) {\n    case 2:\n      o.transform(-1, 0, 0, 1, r, 0);\n      break;\n\n    case 3:\n      o.transform(-1, 0, 0, -1, r, t);\n      break;\n\n    case 4:\n      o.transform(1, 0, 0, -1, 0, t);\n      break;\n\n    case 5:\n      o.transform(0, 1, 1, 0, 0, 0);\n      break;\n\n    case 6:\n      o.transform(0, 1, -1, 0, t, 0);\n      break;\n\n    case 7:\n      o.transform(0, -1, -1, 0, t, r);\n      break;\n\n    case 8:\n      o.transform(0, -1, 1, 0, 0, r);\n  }\n\n  return o.drawImage(e, 0, 0, r, t), i;\n}\n\nfunction getNewCanvasAndCtx(e, n) {\n  var r, t;\n\n  try {\n    t = (r = new OffscreenCanvas(e, n)).getContext(\"2d\");\n  } catch (e) {\n    t = (r = document.createElement(\"canvas\")).getContext(\"2d\");\n  }\n\n  return r.width = e, r.height = n, [r, t];\n}\n\nfunction compress(e, n) {\n  return new Promise(function (r, t) {\n    var a, i, o, s, c, u;\n    return a = n.maxIteration || 10, i = 1024 * n.maxSizeMB * 1024, drawFileInCanvas(e).then(function (l) {\n      try {\n        var m = _slicedToArray(l, 2);\n\n        return m[0], o = handleMaxWidthOrHeight(o = m[1], n), new Promise(function (r, t) {\n          var a;\n          if (!(a = n.exifOrientation)) return getExifOrientation(e).then(function (e) {\n            try {\n              return a = e, $If_2.call(this);\n            } catch (e) {\n              return t(e);\n            }\n          }.bind(this), t);\n\n          function $If_2() {\n            return r(a);\n          }\n\n          return $If_2.call(this);\n        }).then(function (l) {\n          try {\n            return n.exifOrientation = l, o = followExifOrientation(o, n.exifOrientation), s = 1, canvasToFile(o, e.type, e.name, e.lastModified, s).then(function (n) {\n              try {\n                var l,\n                    m = function $Loop_3() {\n                  if (a-- && u.size > i) {\n                    var n,\n                        r,\n                        c,\n                        l = _slicedToArray(getNewCanvasAndCtx(n = .9 * o.width, r = .9 * o.height), 2);\n\n                    return c = l[0], l[1].drawImage(o, 0, 0, n, r), \"image/jpeg\" === e.type && (s *= .9), canvasToFile(c, e.type, e.name, e.lastModified, s).then(function (e) {\n                      try {\n                        return u = e, o = c, $Loop_3;\n                      } catch (e) {\n                        return t(e);\n                      }\n                    }, t);\n                  }\n\n                  return [1];\n                },\n                    f = function $Loop_3_exit() {\n                  return r(u);\n                };\n\n                return (c = n).size <= i ? r(c) : (u = c, (l = function (e) {\n                  for (; e;) {\n                    if (e.then) return void e.then(l, t);\n\n                    try {\n                      if (e.pop) {\n                        if (e.length) return e.pop() ? f.call(this) : e;\n                        e = m;\n                      } else e = e.call(this);\n                    } catch (e) {\n                      return t(e);\n                    }\n                  }\n                }.bind(this))(m));\n              } catch (e) {\n                return t(e);\n              }\n            }.bind(this), t);\n          } catch (e) {\n            return t(e);\n          }\n        }.bind(this), t);\n      } catch (e) {\n        return t(e);\n      }\n    }.bind(this), t);\n  });\n}\n\nvar n,\n    r = 0;\n\nvar t = function createWorker(e) {\n  return new Worker(URL.createObjectURL(new Blob([\"(\".concat(e, \")()\")])));\n}(function () {\n  var e = !1;\n  self.addEventListener(\"message\", function (n) {\n    return new Promise(function (r, t) {\n      var a,\n          i,\n          o,\n          s,\n          c = n.data;\n      a = c.file, i = c.id, o = c.imageCompressionLibUrl, s = c.options;\n\n      var u = function $Try_1_Post() {\n        try {\n          return r();\n        } catch (e) {\n          return t(e);\n        }\n      },\n          l = function $Try_1_Catch(e) {\n        try {\n          return self.postMessage({\n            error: e.message + \"\\n\" + e.stack,\n            id: i\n          }), u();\n        } catch (e) {\n          return t(e);\n        }\n      };\n\n      try {\n        var m;\n        return e || (importScripts(o), e = !0), imageCompression(a, s).then(function (e) {\n          try {\n            return m = e, self.postMessage({\n              file: m,\n              id: i\n            }), u();\n          } catch (e) {\n            return l(e);\n          }\n        }, l);\n      } catch (e) {\n        l(e);\n      }\n    });\n  });\n});\n\nfunction compressOnWebWorker(e, a) {\n  return new Promise(function (i, o) {\n    return new Promise(function (s, c) {\n      n || (n = function createSourceObject(e) {\n        return URL.createObjectURL(new Blob([e], {\n          type: \"application/javascript\"\n        }));\n      }(\"\\n    function imageCompression (){return (\".concat(imageCompression, \").apply(null, arguments)}\\n\\n    imageCompression.getDataUrlFromFile = \").concat(imageCompression.getDataUrlFromFile, \"\\n    imageCompression.getFilefromDataUrl = \").concat(imageCompression.getFilefromDataUrl, \"\\n    imageCompression.loadImage = \").concat(imageCompression.loadImage, \"\\n    imageCompression.drawImageInCanvas = \").concat(imageCompression.drawImageInCanvas, \"\\n    imageCompression.drawFileInCanvas = \").concat(imageCompression.drawFileInCanvas, \"\\n    imageCompression.canvasToFile = \").concat(imageCompression.canvasToFile, \"\\n    imageCompression.getExifOrientation = \").concat(imageCompression.getExifOrientation, \"\\n    imageCompression.handleMaxWidthOrHeight = \").concat(imageCompression.handleMaxWidthOrHeight, \"\\n    imageCompression.followExifOrientation = \").concat(imageCompression.followExifOrientation, \"\\n\\n    getDataUrlFromFile = imageCompression.getDataUrlFromFile\\n    getFilefromDataUrl = imageCompression.getFilefromDataUrl\\n    loadImage = imageCompression.loadImage\\n    drawImageInCanvas = imageCompression.drawImageInCanvas\\n    drawFileInCanvas = imageCompression.drawFileInCanvas\\n    canvasToFile = imageCompression.canvasToFile\\n    getExifOrientation = imageCompression.getExifOrientation\\n    handleMaxWidthOrHeight = imageCompression.handleMaxWidthOrHeight\\n    followExifOrientation = imageCompression.followExifOrientation\\n\\n    getNewCanvasAndCtx = \").concat(getNewCanvasAndCtx, \"\\n    \\n    CustomFileReader = FileReader\\n    \\n    CustomFile = File\\n    \\n    function _slicedToArray(arr, n) { return arr }\\n\\n    function compress (){return (\").concat(compress, \").apply(null, arguments)}\\n    \")));\n      var u = r++;\n      return t.addEventListener(\"message\", function handler(e) {\n        e.data.id === u && (t.removeEventListener(\"message\", handler), e.data.error && o(new Error(e.data.error)), i(e.data.file));\n      }), t.postMessage({\n        file: e,\n        id: u,\n        imageCompressionLibUrl: n,\n        options: a\n      }), s();\n    });\n  });\n}\n\nfunction imageCompression(e, n) {\n  return new Promise(function (r, t) {\n    var a, i;\n    if (n.maxSizeMB = n.maxSizeMB || Number.POSITIVE_INFINITY, n.useWebWorker = \"boolean\" != typeof n.useWebWorker || n.useWebWorker, !(e instanceof Blob || e instanceof CustomFile)) return t(new Error(\"The file given is not an instance of Blob or File\"));\n    if (!/^image/.test(e.type)) return t(new Error(\"The file given is not an image\"));\n    if (i = \"undefined\" != typeof WorkerGlobalScope && self instanceof WorkerGlobalScope, !n.useWebWorker || \"function\" != typeof Worker || i) return compress(e, n).then(function (e) {\n      try {\n        return a = e, $If_3.call(this);\n      } catch (e) {\n        return t(e);\n      }\n    }.bind(this), t);\n\n    var o = function () {\n      try {\n        return $If_3.call(this);\n      } catch (e) {\n        return t(e);\n      }\n    }.bind(this),\n        s = function $Try_1_Catch(r) {\n      try {\n        return console.warn(\"Run compression in web worker failed:\", r, \", fall back to main thread\"), compress(e, n).then(function (e) {\n          try {\n            return a = e, o();\n          } catch (e) {\n            return t(e);\n          }\n        }, t);\n      } catch (e) {\n        return t(e);\n      }\n    };\n\n    try {\n      return compressOnWebWorker(e, n).then(function (e) {\n        try {\n          return a = e, o();\n        } catch (e) {\n          return s(e);\n        }\n      }, s);\n    } catch (e) {\n      s(e);\n    }\n\n    function $If_3() {\n      try {\n        a.name = e.name, a.lastModified = e.lastModified;\n      } catch (e) {}\n\n      return r(a);\n    }\n  });\n}\n\nimageCompression.getDataUrlFromFile = getDataUrlFromFile, imageCompression.getFilefromDataUrl = getFilefromDataUrl, imageCompression.loadImage = loadImage, imageCompression.drawImageInCanvas = drawImageInCanvas, imageCompression.drawFileInCanvas = drawFileInCanvas, imageCompression.canvasToFile = canvasToFile, imageCompression.getExifOrientation = getExifOrientation, imageCompression.handleMaxWidthOrHeight = handleMaxWidthOrHeight, imageCompression.followExifOrientation = followExifOrientation;\nexport default imageCompression;","import Promise from \"bluebird\";\r\nimport imageCompression from \"browser-image-compression\";\r\nimport storage from \"../storage\";\r\n\r\nconst MAX_COMPRESS_IMAGE_SIZE = 1;\r\nconst MAX_IMAGE_WIDTH_HEIGHT = 1920;\r\n\r\nexport const toBase64 = file =>\r\n  new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = () => resolve(reader.result);\r\n    reader.onerror = error => reject(error);\r\n  });\r\n\r\nexport const convertAndCompress = async f => {\r\n  const options = {\r\n    maxSizeMB: MAX_COMPRESS_IMAGE_SIZE,\r\n    maxWidthOrHeight: MAX_IMAGE_WIDTH_HEIGHT,\r\n    useWebWorker: true\r\n  };\r\n  const compressedImage = await imageCompression(f, options);\r\n  return await toBase64(compressedImage);\r\n};\r\n\r\nexport const getFileFromEvent = async event => {\r\n  if (event.dataTransfer.items) {\r\n    // Use DataTransferItemList interface to access the file(s)\r\n    const [item] = event.dataTransfer.items;\r\n    if (item.kind === \"file\") {\r\n      // If dropped items aren't files, reject them\r\n      let file = item.getAsFile();\r\n      return await convertAndCompress(file);\r\n    }\r\n  } else {\r\n    // Use DataTransfer interface to access the file(s)\r\n    let [file] = event.dataTransfer.files;\r\n    return await convertAndCompress(file);\r\n  }\r\n  return null;\r\n};\r\n\r\nexport const saveImage = async file => await storage.set(\"image\", file);\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Editor from \"../../components/canvas-editor/\";\r\nimport { ImageContext } from \"../../utils/context/image.context\";\r\nimport { getFileFromEvent, saveImage } from \"../../utils/file\";\r\nimport storage from \"../../utils/storage\";\r\nimport { SETTINGS } from \"../../config/constants\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  container: {\r\n    height: \"calc(100% - 112px)\",\r\n    width: \"100%\"\r\n  }\r\n}));\r\n\r\nfunction Canvas(props, context) {\r\n  const classes = useStyles();\r\n  const [brightness, setBrightness] = useState(100);\r\n  const { setImage } = useContext(ImageContext);\r\n  useEffect(() => {\r\n    async function _getBrightness() {\r\n      setBrightness((await storage.get(SETTINGS.BRIGHTNESS)) || 100);\r\n    }\r\n    _getBrightness();\r\n    return () => {};\r\n  }, []);\r\n  const canvasProps = {\r\n    canvas: {\r\n      onDrop: (event) => {\r\n        // Prevent default behavior (Prevent file from being opened)\r\n        event.preventDefault();\r\n        async function _processFile() {\r\n          const file = await getFileFromEvent(event);\r\n          setImage(file);\r\n          await saveImage(file);\r\n        }\r\n\r\n        _processFile();\r\n      },\r\n      onDragOver: (ev) => ev.preventDefault()\r\n    },\r\n    brightness\r\n  };\r\n  return (\r\n    <div className={classes.container}>\r\n      <ImageContext.Consumer>\r\n        {({ image }) => <Editor {...{ ...canvasProps, image }} />}\r\n      </ImageContext.Consumer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Canvas;\r\n"],"sourceRoot":""}